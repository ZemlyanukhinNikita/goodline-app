# План 3
### Log4j
##### 1.1 Предмет исследования
  - Для чего используется библиотека log4j?
  - Какие классы имеются в библиотеке?
  - Какие есть методы и что они делают?
  - Как выводить логи в stdout?
  - Как выводить логи в файл?
##### 1.2 Методы исследования
  - Официальный сайт
  - JavaDoc
  - Техническая пробная реализация логирования в stdout
  - Техническая пробная реализация логирования в aaa.log
##### 1.3 Ожидаемые результаты
  - Изучить и научиться использовать библиотеку
  - Логировать в stdout 
  - Логировать в aaa.log
### 2. Flyway
##### 2.1 Предмет исследования
  - Для чего используется библиотека Flyway?
  - Какие классы имеются в библиотеке?
  - Какие есть методы и что они делают?
  - Что такое миграции?
  - Как инициализировать схему если БД не найдена?
##### 2.2 Методы исследования
  - Официальный сайт
  - Смотреть видеоматериалы.
##### 2.3 Ожидаемые результаты
  - Изучить и научиться использовать библиотеку
  - Инициализировать схему если БД не найдена 
### 3. Создать файл roadmap3.md, написать план работ и добавить ссылку в README.md
### 4. Описать таблицы базы данных
##### 4.1 TABLE USER
  + ID (pk, auto_increment)
  + LOGIN (unique)
  + HASH_PASSWORD
  + SALT
##### 4.2 TABLE RESOURCE_USERS_ROLES
  + ID (pk, auto_increment)
  + USER_ID (fk)
  + ROLE
  + PATH
##### 4.3 ACCOUNTING
  + ID (pk, unique, auto_increment)
  + RESOURCE_USERS_ROLES_ID (fk)
  + START_DATE
  + END_DATE
  + VOLUME
![schema](https://user-images.githubusercontent.com/32156396/32725429-a76124c4-c8a7-11e7-9a16-832eaa9a13c4.png)
### 5. Создание миграций.
##### - 5.1. Создать пакет resources/db/migration/
  - куда будем помещать файлы миграции
##### - 5.2 Создать файл V1__Create_schema.sql
  - Миграция будет создавать схему БД,
		с таблицей USER, RESOURCE_USERS_ROLES, ACCOUNTING
##### - 5.3 Добавить индекс (пользователь, роль)
##### - 5.4. Создать класс DbConnection
  - здесь проверяем подключение к БД.
##### - 5.5. Создать файл миграции заполнение тестовыми данными БД V1__Insert_data.sql
##### - 5.6 Сделать в приложении создание файла aaa.db в директории запуска и инициализировать схему если БД не найдена.
##### - 5.6. Сделать миграцию V1__Insert_data.sql, проверить aaa.db, заполнились ли таблицы тестовыми данными.
### 6. Создание DAO. Создать пакет dao
##### - 6.1 Создать класс AaaDAO
  - Содать методы выборки данных для аутентификации, авторизации и аккаунтинга из БД. 
##### - 6.2 Перенести класс DbConnection в пакет dao
### 7. Классы пакета service переписать, чтобы они использовали DAO.
