# План 3
### 1. Log4j (360 минут)
##### 1.1 Предмет исследования
  - Для чего используется библиотека log4j?
  - Какие классы имеются в библиотеке?
  - Какие есть методы и что они делают?
  - Как выводить логи в stdout?
  - Как выводить логи в файл?
##### 1.2 Методы исследования
  - Официальный сайт
  - JavaDoc
  - Техническая пробная реализация логирования в stdout
  - Техническая пробная реализация логирования в aaaService.log
##### 1.3 Ожидаемые результаты
  - Изучить и научиться использовать библиотеку
  - Логировать в stdout 
  - Логировать в aaaService.log
### 2. Flyway (360 минут)
##### 2.1 Предмет исследования
  - Для чего используется библиотека Flyway?
  - Какие классы имеются в библиотеке?
  - Какие есть методы и что они делают?
  - Что такое миграции?
  - Как инициализировать схему если БД не найдена?
##### 2.2 Методы исследования
  - Официальный сайт
  - Смотреть видеоматериалы.
##### 2.3 Ожидаемые результаты
  - Изучить и научиться использовать библиотеку
  - Инициализировать схему если БД не найдена 
### 3. Создать файл roadmap3.md, написать план работ и добавить ссылку в README.md (5 мин)
### 4. Описать таблицы базы данных (15 мин)
##### 4.1 TABLE USER (5 мин)
  + ID (pk, auto_increment)
  + LOGIN (unique)
  + HASH_PASSWORD
  + SALT
##### 4.2 TABLE RESOURCE_USERS_ROLES (5 мин)
  + ID (pk, auto_increment)
  + USER_ID (fk)
  + ROLE
  + PATH
##### 4.3 ACCOUNTING (5 мин)
  + ID (pk, unique, auto_increment)
  + RESOURCE_USERS_ROLES_ID (fk)
  + START_DATE
  + END_DATE
  + VOLUME
![schema](https://user-images.githubusercontent.com/32156396/32725429-a76124c4-c8a7-11e7-9a16-832eaa9a13c4.png)
### 5. Создание миграций. (62 мин)
##### - 5.1. Создать пакет resources/db/migration/ (2 мин)
  - куда будем помещать файлы миграции
##### - 5.2 Создать файл V1__Create_schema.sql (15 мин)
  - Миграция будет создавать схему БД,
		с таблицей USER, RESOURCE_USERS_ROLES, ACCOUNTING
##### - 5.3 Добавить индекс (пользователь, роль) (5 мин)
##### - 5.4. Создать класс DbConnection (10 мин)
  - здесь проверяем подключение к БД.
##### - 5.5. Создать файл миграции заполнение тестовыми данными БД V2__Insert_data.sql (15 мин)
##### - 5.6 Сделать в приложении создание файла aaaService.db в директории запуска и инициализировать схему если БД не найдена. (10 мин)
##### - 5.6. Сделать миграцию V2__Insert_data.sql, проверить aaaService.db, заполнились ли таблицы тестовыми данными. (5 мин)
### 6. Создание DAO. Создать пакет dao (31 мин)
##### - 6.1 Создать класс AaaDAO (51 мин)
  - Содать методы выборки данных для аутентификации, авторизации и аккаунтинга из БД. 
##### - 6.2 Перенести класс DbConnection в пакет dao (1 мин)
### 7. Классы пакета service переписать, чтобы они использовали DAO. (50 мин)

| Пункт плана                         | Оценка времени                | Фактическое время        |
|-------------------------------------|-------------------------------|--------------------------|
| 1.Log4j			      |  360 минут                    | 	                 |
| 2.Flyway	                      |  360 минут                    | 	                 |
| 3.Добавить Roadmap3                 |  5 минут                      | 	                 |
| 4.Описать таблицы базы данных       |  15 минут                     |   	                 |
| 5.Создание миграций		      |  62 минут                     | 	                 |
| 6.Создание DAO. Создать пакет dao   |  31 минут                     | 	                 |
| 7.Переписать service                |  50 минут                     | 	                 |
| Итого                               |  883 минуты		      | 			 |
